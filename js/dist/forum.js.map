{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@dhtml/cpages/webpack/bootstrap","webpack://@dhtml/cpages/webpack/runtime/compat get default export","webpack://@dhtml/cpages/webpack/runtime/define property getters","webpack://@dhtml/cpages/webpack/runtime/hasOwnProperty shorthand","webpack://@dhtml/cpages/external root \"flarum.core.compat['common/app']\"","webpack://@dhtml/cpages/./src/common/index.ts","webpack://@dhtml/cpages/external root \"flarum.core.compat['forum/app']\"","webpack://@dhtml/cpages/external root \"flarum.core.compat['common/extend']\"","webpack://@dhtml/cpages/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@dhtml/cpages/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@dhtml/cpages/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@dhtml/cpages/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@dhtml/cpages/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@dhtml/cpages/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@dhtml/cpages/external root \"flarum.core.compat['common/components/Page']\"","webpack://@dhtml/cpages/./src/forum/components/PageLoader.js","webpack://@dhtml/cpages/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@dhtml/cpages/./src/forum/index.ts","webpack://@dhtml/cpages/./src/forum/addSideBar.js","webpack://@dhtml/cpages/./src/forum/addInfinityScroller.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('dhtml/cpages', () => {\n  //console.log('[dhtml/cpages] Hello, forum and admin!');\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","import app from 'flarum/forum/app';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport listItems from 'flarum/common/helpers/listItems';\nimport Page from 'flarum/common/components/Page';\n\nexport default class PageLoader extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.slug = vnode.attrs.routeName;\n    this.page = null;\n\n    this.loading = true;\n\n    this.pageContent = null;\n\n    this.loadPage();\n  }\n\n  /**\n   * Initialize page.\n   *\n   * @param {fof/pages/models/Page} page\n   * @protected\n   */\n  show(page) {\n    this.page = page;\n\n    //app.history.push('page', page.title);\n    app.setTitle(page.title);\n\n    //set the content\n    this.pageContent = page.content;\n\n    m.redraw();\n  }\n\n  loadPage() {\n    app.request({\n      method: 'GET',\n      url: app.forum.attribute(\"apiUrl\") + '/cpage/' + this.slug,\n    }).then(response => {\n      this.show(response.data.attributes);\n    });\n  }\n\n  renderPage() {\n    if(!this.loading) {\n      return LoadingIndicator.component({ className: 'LoadingIndicator--block' })\n    } else {\n     return (m(\"div.ContentPages\",  m.trust(this.pageContent)));\n    }\n    /*\n    return m(\".IndexPage\", [\n      IndexPage.prototype.hero(),\n      m(\n        \".container\",\n        m(\n          \".IndexPage-results.sideNavOffset\",\n          m(\"div.ContentPages\",  m.trust(this.pageContent)),\n        ),\n      ),\n    ]);\n     */\n  }\n\n  view() {\n\n    return (\n      <div className=\"IndexPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"IndexPage-nav sideNav\">\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"IndexPage-results sideNavOffset\">\n\n              {this.renderPage()}\n\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/forum/app';\nimport addSideBar from \"./addSideBar\";\nimport addInfinityScroller from \"./addInfinityScroller\";\nimport PageLoader from \"./components/PageLoader\";\nimport { extend } from 'flarum/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport {ObjectStore} from \"../common/ObjectStore\";\n\nimport addTopBar from \"./addTopBar\";\n\napp.initializers.add('dhtml/cpages', () => {\n\n  /*\n  const store = new ObjectStore();\n\n  extend(IndexPage.prototype, 'sidebarItems', function (items:any) {\n\n    store.setItems(items);\n    var data = store.getData();\n\n    if(data) {\n      console.log('get sidebar from cache');\n      addSideBar(store.getItems(),data);\n    } else {\n      app.request({\n        method: 'GET',\n        url: app.forum.attribute(\"apiUrl\") + '/cpages-data',\n      }).then((response: { data: { attributes: any; }; }) => {\n        console.log('get sidebar from api');\n        data = response.data.attributes;\n        store.setData(data);\n        addSideBar(store.getItems(),data);\n      });\n    }\n\n  });\n  */\n\n\n    const slugs = [\n    'contact-us',\n    'about-us',\n    'privacy-policy',\n    'terms',\n    'guidelines',\n    'download'\n  ];\n\n  slugs.forEach(slug => {\n    app.routes[slug] = { path: `/${slug}`, component: PageLoader, resolveComponent: () => PageLoader.extend({ slug }) };\n  });\n\n\n  //addTopBar();\n  addSideBar();\n\n  addInfinityScroller();\n});\n","import { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Separator from 'flarum/common/components/Separator';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nimport app from 'flarum/forum/app';\n\nexport default function () {\n\n  // Add a link to the tags page, as well as a list of all the tags,\n  // to the index page's sidebar.\n  extend(IndexPage.prototype, 'navItems', function (items) {\n\n    const currentLocale = app.data.locale;\n    //console.log('currentLocale:', currentLocale);\n\n    let cpagedata = app.forum.attribute('dhtml-cpages.locale');\n\n    try {\n      cpagedata = JSON.parse(cpagedata);\n      cpagedata = cpagedata[currentLocale]\n    } catch (e) {\n      //console.log(\"Error: \",e);\n    }\n\n    //console.log({cpagedata});\n\n\n    const priority = 0;\n\n    const translate = (title) => {\n      return cpagedata[title] ?? app.translator.trans('dhtml-cpages.forum.'+title);\n    };\n\n    items.add(\n      'customLink-1',\n      <LinkButton external={false} href={'/tags'} rel=\"noopener noreferrer\" icon='fas fa-th-large'>\n        {translate('tags-cloud')}\n      </LinkButton>,\n      priority\n    );\n\n    items.add(\n      'customLink-3',\n      <LinkButton external={false} href={'/leaderboard'} rel=\"noopener noreferrer\" icon='fas fa-trophy'>\n        {translate('leaderboard')}\n      </LinkButton>,\n      priority\n    );\n\n    /*\n    items.add(\n      'customLink-2',\n      <LinkButton external={true} target='_blank' href={'https://d.afr.ng'} rel=\"noopener noreferrer\" icon='fab fa-discord'>\n        {translate('discord-chat')}\n      </LinkButton>,\n      priority\n    );\n     */\n\n    items.add(\n      'customSeparator-1',\n      <li className=\"Dropdown-separator\"></li>,\n      -14\n    );\n\n\n    /*\n    items.add(\n      'dhtml-sidebar-membership-1a',\n      <LinkButton external={false} icon=\"fas fa-graduation-cap\" href={'/t/live'}>\n        {translate('live')}\n      </LinkButton>,\n      -14\n    );\n\n    items.add(\n      'dhtml-sidebar-membership-1b',\n      <LinkButton external={false} icon=\"fas fa-briefcase\" href={'/t/jobs'}>\n        {translate('jobs')}\n      </LinkButton>,\n      -14\n    );\n\n    items.add(\n      'dhtml-sidebar-membership-1c',\n      <LinkButton external={false} icon=\"fas fa-chalkboard-teacher\" href={'/t/events'}>\n        {translate('events')}\n      </LinkButton>,\n      -14\n    );\n\n    items.add(\n      'dhtml-sidebar-membership-2',\n      <LinkButton external={false} icon=\"fas fa-tools\" href={'/t/workshops'}>\n        {translate('workshops')}\n      </LinkButton>,\n      -14\n    );\n\n    items.add(\n      'dhtml-sidebar-membership-3',\n      <LinkButton external={false} icon=\"fas fa-flag-checkered\" href={'/t/challenges'}>\n        {translate('challenges')}\n      </LinkButton>,\n      -14\n    );\n\n\n    items.add(\n      'dhtml-sidebar-membership-7',\n      <LinkButton external={false} icon=\"fas fa-tv\" href={'/t/showcase'}>\n        {translate('showcase')}\n      </LinkButton>,\n      -14\n    );\n     */\n\n    items.add(\n      'dhtml-sidebar-membership-8',\n      <LinkButton external={false} icon=\"fas fa-question-circle\" href={'/t/questions-and-answers'}>\n        {translate('questions')}\n      </LinkButton>,\n      -14\n    );\n\n    items.add(\n      'dhtml-sidebar-membership-90',\n      <LinkButton external={false} icon=\"fas fa-users\" href={'/t/community'}>\n        {translate('community')}\n      </LinkButton>,\n      -14\n    );\n\n\n    items.add(\n      'customSeparator-3',\n      <li className=\"Dropdown-separator\"></li>,\n      -14\n    );\n\n    items.add(\n      'dhtml-sidebar-about',\n      <LinkButton external={false} icon=\"fas fa-info-circle\" href={'/about-us'}>\n        {translate('about-us')}\n      </LinkButton>,\n      -14\n    );\n\n    items.add(\n      'dhtml-sidebar-guideline',\n      <LinkButton external={false} icon=\"fas fa-book\" href={'/guidelines'}>\n        {translate('guidelines')}\n      </LinkButton>,\n      -14\n    );\n\n    items.add(\n      'dhtml-sidebar-privacy',\n      <LinkButton external={false} icon=\"fas fa-user-secret\" href={'/privacy-policy'}>\n        {translate('privacy-policy')}\n      </LinkButton>,\n      -14\n    );\n\n\n    items.add(\n      'dhtml-sidebar-terms',\n      <LinkButton external={false} icon=\"fas fa-file-contract\" href={'/terms'}>\n        {translate('terms-of-use')}\n      </LinkButton>,\n      -14\n    );\n\n\n    items.add(\n      'dhtml-sidebar-contact',\n      <LinkButton icon=\"fas fa-at\" href={'/contact-us'}>\n        {translate('contact-us')}\n      </LinkButton>,\n      -14\n    );\n\n\n    items.add(\n      'dhtml-sidebar-download',\n      <LinkButton external={false} icon=\"fas fa-download\" href={'/download'}>\n        {translate('download-app')}\n      </LinkButton>,\n      -14\n    );\n\n    const CustomFooter = () => {\n      const currentYear = new Date().getFullYear();\n\n      return (\n        <span className=\"CustomSidebarFooter\">\n      Â© Africoders {currentYear}\n    </span>\n      );\n    }\n\n    items.add('custom-sidebar', CustomFooter(), -14);\n\n  });\n}\n","export default function () {\n\n  const multiplier = 1.75\n\n  function loadMoreIfNeeded() {\n    const distanceToBottom = -(\n      (document.body.scrollHeight || document.documentElement.scrollHeight) -\n      (document.body.scrollTop ||\n        document.documentElement.scrollTop +\n        document.documentElement.clientHeight)\n    );\n\n    if (distanceToBottom > document.documentElement.clientHeight * multiplier) return;\n\n    $(\".DiscussionList-loadMore button\").click();\n  }\n\n  document.addEventListener(\"scroll\", loadMoreIfNeeded, { passive: true });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","app","add","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","PageLoader","_Page","apply","arguments","create","constructor","_proto","oninit","vnode","this","slug","attrs","routeName","page","loading","pageContent","loadPage","show","title","content","m","redraw","_this","method","url","attribute","then","response","data","attributes","renderPage","trust","LoadingIndicator","className","view","IndexPage","hero","listItems","sidebarItems","toArray","Page","forEach","path","component","resolveComponent","extend","items","currentLocale","locale","cpagedata","JSON","parse","currentYear","translate","_cpagedata$title","trans","LinkButton","external","href","rel","icon","Date","getFullYear","document","addEventListener","body","scrollHeight","documentElement","scrollTop","clientHeight","$","click","passive"],"sourceRoot":""}